# SonarQube Configuration for WebSSH2

# Project Information
sonar.projectKey=webssh2
sonar.projectName=WebSSH2
sonar.projectVersion=1.0

# Source and Test Configuration
sonar.sources=app,index.ts,scripts
sonar.tests=tests
sonar.test.inclusions=tests/**/*.test.ts,tests/**/*.test.js,tests/**/*.vitest.ts,tests/**/*.spec.ts,tests/**/*.spec.js

# TypeScript/JavaScript Configuration
sonar.typescript.file.suffixes=.ts,.tsx
sonar.javascript.file.suffixes=.js,.jsx,.mjs,.cjs

# Coverage and Analysis
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.testExecutionReportPaths=coverage/test-reporter.xml

# Exclusions
sonar.exclusions=node_modules/**,coverage/**,client/public/**,*.md,*.json,tests/servers/**,dist/**,**/*.d.ts,**/*.mjs,.tsbuildinfo,tests/test-constants.ts

# Test-specific rule exclusions
# S2068: Hard-coded credentials (acceptable in test files)
# S4036: Searching OS commands in PATH (needed for test infrastructure)
# S6290: Hardcoded secrets (TypeScript variant)
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6,e7,e8,e9,e10
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S2068
sonar.issue.ignore.multicriteria.e1.resourceKey=tests/**/*
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S4036
sonar.issue.ignore.multicriteria.e2.resourceKey=tests/**/*
sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S4036
sonar.issue.ignore.multicriteria.e3.resourceKey=scripts/**/*
sonar.issue.ignore.multicriteria.e4.ruleKey=javascript:S2068
sonar.issue.ignore.multicriteria.e4.resourceKey=tests/**/*
sonar.issue.ignore.multicriteria.e5.ruleKey=typescript:S6290
sonar.issue.ignore.multicriteria.e5.resourceKey=tests/**/*
sonar.issue.ignore.multicriteria.e6.ruleKey=javascript:S6290
sonar.issue.ignore.multicriteria.e6.resourceKey=tests/**/*
sonar.issue.ignore.multicriteria.e7.ruleKey=typescript:S2068
sonar.issue.ignore.multicriteria.e7.resourceKey=tests/unit/socket/**/*
sonar.issue.ignore.multicriteria.e8.ruleKey=typescript:S6290
sonar.issue.ignore.multicriteria.e8.resourceKey=tests/unit/socket/**/*
sonar.issue.ignore.multicriteria.e9.ruleKey=typescript:S2068
sonar.issue.ignore.multicriteria.e9.resourceKey=tests/test-constants.ts
sonar.issue.ignore.multicriteria.e10.ruleKey=typescript:S1313
sonar.issue.ignore.multicriteria.e10.resourceKey=tests/test-constants.ts

# Language Configuration
sonar.sourceEncoding=UTF-8

# Optional: Specify Node.js executable if needed
# sonar.nodejs.executable=/usr/local/bin/node

# Optional: Increase max file size if needed (default 1000KB)
# sonar.javascript.maxFileSize=2000